group 'dbaltor'
version '1.0-SNAPSHOT'

apply plugin: 'application'

mainClassName = 'map.Supplier'

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
  mavenCentral()
}

buildscript {
  repositories {
      mavenCentral()
  }
  dependencies {
      classpath "io.spring.gradle:dependency-management-plugin:1.0.3.RELEASE"
  }
}

apply plugin: "io.spring.dependency-management"

dependencyManagement {
  imports {
	  mavenBom 'software.amazon.awssdk:bom:2.0.0-preview-12'
  }
}

dependencies {
  compile 'software.amazon.awssdk:sns'
  compile 'software.amazon.awssdk:sqs'
  testCompile group: 'junit', name: 'junit', version: '4.11'
}

jar {
  manifest {
    attributes(
      'Class-Path': configurations.compile.collect { it.getName() }.join(' '),
      'Main-Class': 'map.Supplier'
    )
  }
  
task finalize(type: Exec) {
	commandLine "cmd", "/c", "cp ./build/libs/${project.name}-${project.version}.jar ./build/distributions/${project.name}-${project.version}/lib/"
    println("Will copy ./build/libs/${project.name}-${project.version}.jar to ./build/distributions/${project.name}-${project.version}/lib/")
}
//task copyDocs(type: Copy) {
//    from "./build/libs/${project.name}-${project.version}.jar"
//    into "./build/distributions/${project.name}-${project.version}/lib/"
//}

}
build.finalizedBy(finalize)